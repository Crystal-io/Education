# 05. Incident Management: управление инцидентами в платежных операциях

## Цель главы

Эта глава описывает, **как PSP Account Manager (Operations) управляет инцидентами**
в платежных системах — от первых сигналов деградации до восстановления стабильности
и предотвращения повторений.

После прочтения ты должен:
- понимать, что считается инцидентом в платежах;
- уметь классифицировать инциденты по severity;
- знать полный lifecycle инцидента;
- понимать роль PSP Ops на каждом этапе;
- уметь говорить об инцидентах как о процессе, а не хаотичной реакции.

---

## 1. Что такое инцидент в платежных системах

**Инцидент** — это любое событие, которое:
- нарушает нормальную работу платежей;
- приводит к деградации ключевых метрик;
- требует немедленного операционного вмешательства.

Важно:
> инцидент — это **не только outage**, но и устойчивая деградация.

Примеры инцидентов:
- падение approval rate на 20%+;
- рост timeouts и pending;
- массовые проблемы с payout SLA;
- потеря webhooks;
- резкий рост chargebacks после изменения routing.

---

## 2. Почему Incident Management критичен для PSP Ops

Без формализованного incident management:
- команда реагирует хаотично;
- проблемы решаются дольше;
- повторяются одни и те же ошибки;
- бизнес теряет деньги и доверие.

Для PSP Ops incident management — это:
> способ **контролировать хаос**, а не тушить пожары.

---

## 3. Типы платежных инцидентов

### 3.1. Technical Incidents
- outages PSP;
- network issues;
- 5xx errors;
- webhook delivery failures.

### 3.2. Performance Incidents
- рост latency;
- увеличение timeouts;
- деградация SLA.

### 3.3. Business Incidents
- падение approval;
- массовые declines;
- проблемы с локальными методами оплаты.

### 3.4. Compliance & Risk Incidents
- массовые payout holds;
- внезапные блокировки GEO;
- изменения antifraud/AML правил.

Зрелый PSP Ops **различает тип инцидента**, потому что реакция на них разная.

---

## 4. Severity Levels (SEV)

Типичная классификация:

### SEV-1 (Critical)
- платежи недоступны или почти полностью не работают;
- сильное влияние на выручку;
- требует немедленных действий и постоянной коммуникации.

### SEV-2 (Major)
- значительная деградация;
- часть GEO / методов затронута;
- требует срочного triage и mitigation.

### SEV-3 (Minor)
- локальная проблема;
- ограниченное влияние;
- может решаться без экстренной эскалации.

Важно:
> неправильная оценка severity — одна из самых частых ошибок.

---

## 5. Lifecycle инцидента

Инцидент — это **процесс**, а не момент.

### 5.1. Detection (обнаружение)

Источники:
- мониторинг метрик;
- алерты;
- жалобы support;
- сообщения от PSP.

Задача Ops:
- быстро подтвердить, что это реальный инцидент;
- определить первичный scope.

---

### 5.2. Triage (диагностика)

Ключевые вопросы:
- что именно деградировало?
- когда началось?
- какие PSP / методы / GEO затронуты?
- техническая или бизнес-природа?

Triage — это **структурированное сужение проблемы**, а не угадывание.

---

### 5.3. Mitigation (снижение impact)

Цель:
> не «починить идеально», а **быстро уменьшить ущерб**.

Типичные меры:
- fallback на альтернативный PSP;
- временное отключение метода;
- изменение routing weight;
- rollback последних изменений.

Важно:
> mitigation может быть временным и не идеальным.

---

### 5.4. Communication (коммуникация)

Две ключевые линии:
- **внутренняя** (product, support, management);
- **внешняя** (PSP, банки).

Принципы:
- коротко;
- по фактам;
- с регулярными апдейтами;
- без обещаний без уверенности.

Плохая коммуникация может нанести больший ущерб, чем сам инцидент.

---

### 5.5. Resolution (восстановление)

Инцидент считается resolved, когда:
- метрики вернулись к baseline;
- нет новых симптомов;
- подтверждена стабильность (не «пять минут работает»).

Важно:
> resolution ≠ mitigation.

---

### 5.6. Postmortem (разбор)

Цель postmortem:
- понять **почему** это произошло;
- предотвратить повторение;
- улучшить процессы и мониторинг.

Хороший postmortem:
- без поиска виноватых;
- с конкретными action items;
- с ответственными и сроками.

---

## 6. Роль PSP Account Manager (Operations) в инциденте

PSP Ops:
- координирует действия;
- держит общую картину;
- связывает данные, технику и бизнес;
- управляет коммуникацией;
- контролирует follow-up.

PSP Ops **не обязательно чинит руками**, но отвечает за результат.

---

## 7. Связь инцидентов и метрик

Метрики:
- сигнализируют о начале инцидента;
- помогают оценить severity;
- показывают эффект mitigation;
- подтверждают resolution.

Важно:
> инциденты всегда выражаются через метрики.

---

## 8. Типичные ошибки в Incident Management

- отсутствие чёткого владельца инцидента;
- слишком поздняя реакция;
- избыточные изменения без контроля;
- слабая коммуникация;
- отсутствие postmortem.

Зрелая операция учится на инцидентах.

---

## 9. Key takeaways

- Инциденты — неизбежны в платежах.
- Важна не их частота, а **скорость и качество реакции**.
- Incident management — это процесс, а не импровизация.
- PSP Ops — центральная фигура инцидента.
- Хороший postmortem ценнее «быстрого фикса».

---

## 10. Как использовать эту главу

1. Прочитать lifecycle инцидента как сценарий.
2. Применить к реальным кейсам из опыта.
3. Использовать `Quick/ops/*` как практический инструментарий.
4. На интервью рассказывать об инцидентах **через этапы**, а не эмоции.

Эта глава формирует основу операционной зрелости.
